<!DOCTYPE html>
<html>
	<head>
		<title>Mazer</title>
		<link rel="stylesheet" href="css/style.css">
		
	</head>
	<body>
		<canvas width="500" height="500" id="canvas"></canvas>
		<div class="top-margin">
			<button onclick="toggleGrid()">Toggle Grid</button>
		</div>
		<script src="js/structures.js"></script>
		<script src="js/grid.js"></script>
		<script src="js/graphics.js"></script>
		<script>
			var canvas = document.getElementById('canvas');
			var ctx = canvas.getContext('2d');
			var map = [];
			var grid = false;

			

			//Room stuff
			var min_room = 4;
			var max_room = 10;
			var attempts = 50;
			var room_array = [];

			//Helpers
			function randomIntFromInterval(min,max){
				return Math.floor(Math.random()*(max-min+1)+min);
			}


			//Prim's Algorithm Functions
			function pushNeighboursToFrontier(cell){
				//TODO
			}

			function pickFromFrontier(){
				//TODO
			}

			function pickStart(){
				var x;
				var y;
				var not_placeable = true;
				while (not_placeable){
					x = randomIntFromInterval(1, total_x_cells-1);
					y = randomIntFromInterval(1, total_y_cells-1);
					if (map[y][x] === 0){
						not_placeable = false;
					}
				}
				map[y][x] = 2;
				return {x:x, y:y};
			}

			

			// Initialize an empty map

			for (var i = 0; i < total_y_cells; i++){
				map.push([])
				for (var j = 0; j < total_x_cells; j++){
					map[i].push(0);
				}
			}

			function main(){
				// Establish the rooms
				establish_rooms()

				// Paint the rooms
				for (var i = 0; i < room_array.length; i++){
					paintRoom(room_array[i]);
				}


				// Start creating the corridors
				var current_cell = pickStart();
				make_corridors(current_cell)
			}

			main()
		</script>
	</body>
</html>